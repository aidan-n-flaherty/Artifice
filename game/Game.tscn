[gd_scene load_steps=36 format=3 uid="uid://dgp4l24s2rulk"]

[ext_resource type="Script" path="res://Game.gd" id="1_s53r2"]
[ext_resource type="Script" path="res://CameraPivot.gd" id="2_t2ckv"]
[ext_resource type="PackedScene" uid="uid://n0lobms04k46" path="res://Timeline.tscn" id="3_jhu7k"]
[ext_resource type="Shader" path="res://SnowPerlin.gdshader" id="8_4e3wm"]
[ext_resource type="Material" uid="uid://li2d1mgnl1tk" path="res://resources/metal.tres" id="9_j8866"]
[ext_resource type="Texture2D" uid="uid://brxrlxoa5qwsv" path="res://resources/snow.tres" id="9_kcgrj"]
[ext_resource type="Theme" uid="uid://bfwpaonloeco5" path="res://resources/theme.tres" id="9_ttxpu"]
[ext_resource type="Shader" path="res://Refraction.gdshader" id="9_xlyo3"]
[ext_resource type="Texture2D" uid="uid://dg1n1bsa3ya68" path="res://resources/ocean.tres" id="10_i4d0l"]
[ext_resource type="Script" path="res://VirtualCamera3D.gd" id="10_jokxl"]
[ext_resource type="StyleBox" uid="uid://dgq41l16rxlq" path="res://resources/styles/roundRectBlack.tres" id="11_uh1qc"]
[ext_resource type="PackedScene" uid="uid://cfc57qmlyevna" path="res://VesselDetails.tscn" id="12_1uj1h"]
[ext_resource type="Texture2D" uid="uid://c0beg3px50da4" path="res://resources/gameMenuIcons/logsIcon.png" id="12_fsvp4"]
[ext_resource type="PackedScene" uid="uid://cqdpj2uw0cloc" path="res://Shop.tscn" id="12_sa8gc"]
[ext_resource type="PackedScene" uid="uid://symsrj5sm6dt" path="res://Status.tscn" id="13_20fpi"]
[ext_resource type="Texture2D" uid="uid://cp6kr6lqkxiho" path="res://resources/gameMenuIcons/hireIcon.png" id="13_xkygy"]
[ext_resource type="Texture2D" uid="uid://5rc0hts7wgcj" path="res://resources/gameMenuIcons/chartIcon.png" id="14_cfqet"]
[ext_resource type="PackedScene" uid="uid://c7rmgavx0p0po" path="res://Chat.tscn" id="14_xpy25"]
[ext_resource type="Texture2D" uid="uid://ddtmrm6d6rl0c" path="res://resources/gameMenuIcons/chatIcon.png" id="15_lpw6h"]
[ext_resource type="PackedScene" uid="uid://8bjal0hti5cr" path="res://Logs.tscn" id="15_yfjeb"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_ikjik"]
ground_color = Color(0, 0, 0, 1)

[sub_resource type="Sky" id="Sky_02e0x"]
sky_material = SubResource("PhysicalSkyMaterial_ikjik")

[sub_resource type="Environment" id="Environment_2wnku"]
background_energy_multiplier = 0.0
sky = SubResource("Sky_02e0x")
ambient_light_source = 1
ambient_light_color = Color(1, 1, 1, 1)
sdfgi_enabled = true
glow_enabled = true
glow_normalized = true

[sub_resource type="ViewportTexture" id="ViewportTexture_2wh2d"]
viewport_path = NodePath("Viewport/Viewport3D/CameraPivot/FloorDisplay")

[sub_resource type="PlaneMesh" id="PlaneMesh_8tg0o"]
size = Vector2(100, 260)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ps11k"]
render_priority = 0
shader = ExtResource("8_4e3wm")
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/epsilon = 0.01
shader_parameter/cameraSize = 100.0
shader_parameter/land = ExtResource("9_kcgrj")
shader_parameter/ocean = ExtResource("10_i4d0l")

[sub_resource type="PlaneMesh" id="PlaneMesh_pn67n"]
size = Vector2(100, 260)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_evgjh"]
frequency = 0.005
fractal_type = 3
domain_warp_enabled = true

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_otoxq"]
width = 800
height = 2080
invert = true
seamless = true
noise = SubResource("FastNoiseLite_evgjh")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_sil3n"]
seed = 1
frequency = 0.005
fractal_type = 2
domain_warp_enabled = true

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_mpw5d"]
width = 800
height = 2080
seamless = true
noise = SubResource("FastNoiseLite_sil3n")

[sub_resource type="ViewportTexture" id="ViewportTexture_qytxr"]
viewport_path = NodePath("Viewport/Viewport3D/CameraPivot/SubViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1fvqb"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("9_xlyo3")
shader_parameter/speed = 0.005
shader_parameter/cameraSize = 100.0
shader_parameter/screen_texture = SubResource("ViewportTexture_qytxr")
shader_parameter/noise = SubResource("NoiseTexture2D_otoxq")
shader_parameter/noise2 = SubResource("NoiseTexture2D_mpw5d")

[sub_resource type="BoxMesh" id="BoxMesh_j234n"]
size = Vector3(10, 30, 10)

[sub_resource type="ButtonGroup" id="ButtonGroup_ocfcu"]
allow_unpress = true

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
mouse_filter = 1
script = ExtResource("1_s53r2")

[node name="Viewport" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Viewport3D" type="Node3D" parent="Viewport"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Viewport/Viewport3D"]
transform = Transform3D(-0.0533566, 0.722889, -0.6889, 0.687064, 0.527203, 0.5, 0.724635, -0.44664, -0.524801, 0, 0, 0)
layers = 2
light_energy = 2.0
light_bake_mode = 1
shadow_enabled = true
shadow_bias = 0.01
shadow_normal_bias = 3.0
shadow_opacity = 0.85
shadow_blur = 4.0
directional_shadow_mode = 0
directional_shadow_max_distance = 200.0
directional_shadow_pancake_size = 0.0
sky_mode = 1

[node name="CameraPivot" type="Marker3D" parent="Viewport/Viewport3D"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 100, -100)
script = ExtResource("2_t2ckv")

[node name="Camera3D" type="Camera3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 0, 0)
keep_aspect = 0
cull_mask = 3
environment = SubResource("Environment_2wnku")
projection = 1
current = true
fov = 37.8493
size = 100.0
far = 300.0

[node name="FloorDisplay" type="SubViewport" parent="Viewport/Viewport3D/CameraPivot"]
disable_3d = true
transparent_bg = true
size = Vector2i(1000, 2600)

[node name="Sprite3D" type="Sprite3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -99, -100)
flip_h = true
flip_v = true
pixel_size = 0.1
axis = 1
double_sided = false
render_priority = 1
texture = SubResource("ViewportTexture_2wh2d")

[node name="Floor" type="Node3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -100, -100)

[node name="Floor1" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot/Floor"]
cast_shadow = 0
mesh = SubResource("PlaneMesh_8tg0o")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_ps11k")

[node name="Floor2" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 0)
cast_shadow = 0
mesh = SubResource("PlaneMesh_8tg0o")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_ps11k")

[node name="Floor3" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
cast_shadow = 0
mesh = SubResource("PlaneMesh_8tg0o")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_ps11k")

[node name="Reflection" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(1, -1.50996e-07, -8.74228e-08, 1.50996e-07, 1, 7.6233e-21, -8.74228e-08, 1.32005e-14, -1, 0, -100, -100)
sorting_offset = -1.0
cast_shadow = 0
mesh = SubResource("PlaneMesh_pn67n")
surface_material_override/0 = SubResource("ShaderMaterial_1fvqb")

[node name="SubViewport" type="SubViewport" parent="Viewport/Viewport3D/CameraPivot"]
transparent_bg = true
size = Vector2i(1000, 1838)

[node name="VirtualCamera3D" type="Camera3D" parent="Viewport/Viewport3D/CameraPivot/SubViewport"]
transform = Transform3D(-1, 6.18173e-08, 6.18173e-08, 0, 0.707107, -0.707107, -8.74228e-08, -0.707107, -0.707107, 0, -100, -100)
keep_aspect = 0
cull_mask = 5
environment = SubResource("Environment_2wnku")
projection = 1
current = true
fov = 37.8493
size = 100.0
far = 300.0
script = ExtResource("10_jokxl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Viewport/Viewport3D"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 0, 15, 0)
visible = false
mesh = SubResource("BoxMesh_j234n")
surface_material_override/0 = ExtResource("9_j8866")

[node name="GameOverlay" type="VSplitContainer" parent="Viewport"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 0
dragger_visibility = 2

[node name="Overlay" type="Control" parent="Viewport/GameOverlay"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 1

[node name="VBoxContainer" type="VBoxContainer" parent="Viewport/GameOverlay/Overlay"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
theme_override_constants/separation = 0

[node name="TopSpacer" type="Control" parent="Viewport/GameOverlay/Overlay/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5
mouse_filter = 1

[node name="HBoxContainer" type="HBoxContainer" parent="Viewport/GameOverlay/Overlay/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0

[node name="Spacer" type="Control" parent="Viewport/GameOverlay/Overlay/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
mouse_filter = 2

[node name="PercentBar" type="VSlider" parent="Viewport/GameOverlay/Overlay/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0
theme = ExtResource("9_ttxpu")
max_value = 1.0
step = 0.01
value = 1.0
tick_count = 5

[node name="BottomSpacer" type="Control" parent="Viewport/GameOverlay/Overlay/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5
mouse_filter = 1

[node name="Timeline" parent="Viewport/GameOverlay/Overlay/VBoxContainer" instance=ExtResource("3_jhu7k")]
custom_minimum_size = Vector2(0, 80)
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.05

[node name="UIOverlay" type="MarginContainer" parent="Viewport/GameOverlay/Overlay"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 150
theme_override_constants/margin_top = 150
theme_override_constants/margin_right = 150
theme_override_constants/margin_bottom = 150

[node name="Separator" type="VSplitContainer" parent="Viewport/GameOverlay/Overlay/UIOverlay"]
layout_mode = 2
dragger_visibility = 2

[node name="ElementDisplay" type="Control" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.3
mouse_filter = 1

[node name="VBoxContainer" type="VBoxContainer" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Control" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay/VBoxContainer"]
visible = false
layout_mode = 2
size_flags_vertical = 3

[node name="Background" type="Panel" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay/VBoxContainer/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = ExtResource("11_uh1qc")

[node name="MarginContainer" type="MarginContainer" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay/VBoxContainer/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 40
theme_override_constants/margin_top = 40
theme_override_constants/margin_right = 40
theme_override_constants/margin_bottom = 40

[node name="VesselDetails" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay/VBoxContainer/Panel/MarginContainer" instance=ExtResource("12_1uj1h")]
layout_mode = 2

[node name="Gap" type="Control" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/ElementDisplay/VBoxContainer"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2
mouse_filter = 1

[node name="TabDisplay" type="Control" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 1

[node name="Panel" type="Control" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="Panel" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = ExtResource("11_uh1qc")

[node name="Shop" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay/Panel" instance=ExtResource("12_sa8gc")]
visible = false
layout_mode = 1

[node name="Status" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay/Panel" instance=ExtResource("13_20fpi")]
visible = false
layout_mode = 1

[node name="Chat" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay/Panel" instance=ExtResource("14_xpy25")]
visible = false
layout_mode = 1

[node name="Logs" parent="Viewport/GameOverlay/Overlay/UIOverlay/Separator/TabDisplay/Panel" instance=ExtResource("15_yfjeb")]
visible = false
layout_mode = 1

[node name="Spacer" type="Control" parent="Viewport/GameOverlay"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
mouse_filter = 1

[node name="MenuBar" type="Control" parent="."]
top_level = true
anchors_preset = 0
offset_right = 1080.0
offset_bottom = 1920.0
mouse_filter = 2

[node name="VSplitContainer" type="VSplitContainer" parent="MenuBar"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
theme_override_constants/separation = 0
dragger_visibility = 2

[node name="Spacer" type="Control" parent="MenuBar/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2

[node name="Tabs" type="Control" parent="MenuBar/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1

[node name="Background" type="ColorRect" parent="MenuBar/VSplitContainer/Tabs"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
color = Color(0, 0, 0, 1)

[node name="HBoxContainer" type="HBoxContainer" parent="MenuBar/VSplitContainer/Tabs"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
mouse_filter = 0

[node name="LSpacer" type="Control" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="LogContainer" type="MarginContainer" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="LogsButton" type="TextureButton" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer/LogContainer"]
layout_mode = 2
toggle_mode = true
button_group = SubResource("ButtonGroup_ocfcu")
texture_normal = ExtResource("12_fsvp4")
ignore_texture_size = true
stretch_mode = 5

[node name="ShopContainer" type="MarginContainer" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="ShopButton" type="TextureButton" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer/ShopContainer"]
layout_mode = 2
toggle_mode = true
button_group = SubResource("ButtonGroup_ocfcu")
texture_normal = ExtResource("13_xkygy")
ignore_texture_size = true
stretch_mode = 5

[node name="StatusContainer" type="MarginContainer" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="StatusButton" type="TextureButton" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer/StatusContainer"]
layout_mode = 2
toggle_mode = true
button_group = SubResource("ButtonGroup_ocfcu")
texture_normal = ExtResource("14_cfqet")
ignore_texture_size = true
stretch_mode = 5

[node name="ChatContainer" type="MarginContainer" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="ChatButton" type="TextureButton" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer/ChatContainer"]
layout_mode = 2
toggle_mode = true
button_group = SubResource("ButtonGroup_ocfcu")
texture_normal = ExtResource("15_lpw6h")
ignore_texture_size = true
stretch_mode = 5

[node name="RSpacer" type="Control" parent="MenuBar/VSplitContainer/Tabs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[connection signal="value_changed" from="Viewport/GameOverlay/Overlay/VBoxContainer/HBoxContainer/PercentBar" to="." method="_on_percent_bar_value_changed"]
[connection signal="toggled" from="MenuBar/VSplitContainer/Tabs/HBoxContainer/LogContainer/LogsButton" to="." method="_on_logs_button_toggled"]
[connection signal="toggled" from="MenuBar/VSplitContainer/Tabs/HBoxContainer/ShopContainer/ShopButton" to="." method="_on_shop_button_toggled"]
[connection signal="toggled" from="MenuBar/VSplitContainer/Tabs/HBoxContainer/StatusContainer/StatusButton" to="." method="_on_status_button_toggled"]
[connection signal="toggled" from="MenuBar/VSplitContainer/Tabs/HBoxContainer/ChatContainer/ChatButton" to="." method="_on_chat_button_toggled"]
