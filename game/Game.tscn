[gd_scene load_steps=36 format=3 uid="uid://dgp4l24s2rulk"]

[ext_resource type="Script" path="res://Game.gd" id="1_s53r2"]
[ext_resource type="Shader" path="res://Floor.gdshader" id="2_6odax"]
[ext_resource type="Script" path="res://CameraPivot.gd" id="2_t2ckv"]
[ext_resource type="Shader" path="res://Water.gdshader" id="2_wnk18"]
[ext_resource type="PackedScene" uid="uid://n0lobms04k46" path="res://Timeline.tscn" id="3_jhu7k"]
[ext_resource type="StyleBox" uid="uid://coornuougjr7i" path="res://resources/themes/MenuButton/ButtonNormal.tres" id="4_fdg00"]
[ext_resource type="StyleBox" uid="uid://d2ba8dokdt8od" path="res://resources/themes/VSlider/SliderBackground.tres" id="4_vrtfm"]
[ext_resource type="StyleBox" uid="uid://eumwqqqm3xf5" path="res://resources/themes/VSlider/SliderGrabber.tres" id="5_6xaao"]
[ext_resource type="Texture2D" uid="uid://ni2tx8u0abmi" path="res://resources/floorNoise/SnowNoise.tres" id="5_32vqg"]
[ext_resource type="PackedScene" uid="uid://eawm3nae56gi" path="res://Floor.tscn" id="5_da36p"]
[ext_resource type="StyleBox" uid="uid://bbcqsraqxn7j" path="res://resources/themes/MenuButton/ButtonHover.tres" id="5_j8x77"]
[ext_resource type="Texture2D" uid="uid://bu01kj5jvvq1b" path="res://resources/floorNoise/OceanNoise.tres" id="6_4cl8h"]
[ext_resource type="StyleBox" uid="uid://ydy2ph7i0d33" path="res://resources/themes/MenuButton/LeftButtonNormal.tres" id="6_4mo1t"]
[ext_resource type="StyleBox" uid="uid://btgfmsxfwcri7" path="res://resources/themes/MenuButton/ButtonPress.tres" id="6_h0r5t"]
[ext_resource type="StyleBox" uid="uid://b31q0joubx7la" path="res://resources/themes/MenuButton/LeftButtonHover.tres" id="7_84ov1"]
[ext_resource type="StyleBox" uid="uid://c3v6hkt8fdffw" path="res://resources/themes/MenuButton/LeftButtonPress.tres" id="8_csbqx"]
[ext_resource type="StyleBox" uid="uid://ctqramsfdasmb" path="res://resources/themes/MenuButton/RightButtonNormal.tres" id="12_l14op"]
[ext_resource type="StyleBox" uid="uid://bxu6bftnvpiuu" path="res://resources/themes/MenuButton/RightButtonHover.tres" id="13_r880k"]
[ext_resource type="StyleBox" uid="uid://6pudnvggv2g8" path="res://resources/themes/MenuButton/RightButtonPress.tres" id="14_d47sy"]

[sub_resource type="PlaneMesh" id="PlaneMesh_g8j3o"]
lightmap_size_hint = Vector2i(502, 1302)
size = Vector2(100, 260)
subdivide_width = 400
subdivide_depth = 1040

[sub_resource type="FastNoiseLite" id="FastNoiseLite_xatbn"]
fractal_type = 2
domain_warp_enabled = true

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_ygbf3"]
width = 400
height = 1040
seamless = true
as_normal_map = true
bump_strength = 16.0
noise = SubResource("FastNoiseLite_xatbn")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_a41g1"]
seed = 1
fractal_type = 2
domain_warp_enabled = true

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_lcr0e"]
width = 400
height = 1040
seamless = true
as_normal_map = true
bump_strength = 16.0
noise = SubResource("FastNoiseLite_a41g1")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_vr1sg"]
frequency = 0.005
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_kejqq"]
width = 400
height = 1040
seamless = true
noise = SubResource("FastNoiseLite_vr1sg")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_h62s7"]
seed = 1
frequency = 0.005
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_etdrc"]
width = 400
height = 1080
seamless = true
noise = SubResource("FastNoiseLite_h62s7")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ncubh"]
render_priority = 0
shader = ExtResource("2_wnk18")
shader_parameter/albedo = Color(0.0941176, 0.160784, 0.227451, 1)
shader_parameter/time_speed = 0.002
shader_parameter/cameraSize = 100.0
shader_parameter/offset = null
shader_parameter/texture_normal = SubResource("NoiseTexture2D_ygbf3")
shader_parameter/texture_normal2 = SubResource("NoiseTexture2D_lcr0e")
shader_parameter/texture_normal3 = SubResource("NoiseTexture2D_kejqq")
shader_parameter/texture_normal4 = SubResource("NoiseTexture2D_etdrc")

[sub_resource type="PlaneMesh" id="PlaneMesh_cggwn"]
lightmap_size_hint = Vector2i(502, 502)
size = Vector2(100, 260)
subdivide_width = 400
subdivide_depth = 1040

[sub_resource type="ShaderMaterial" id="ShaderMaterial_l3p72"]
render_priority = 0
shader = ExtResource("2_6odax")
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/epsilon = 0.005
shader_parameter/offset = null
shader_parameter/outposts = null
shader_parameter/outpostsLength = 0
shader_parameter/land = ExtResource("5_32vqg")
shader_parameter/ocean = ExtResource("6_4cl8h")

[sub_resource type="Environment" id="Environment_2wnku"]
sdfgi_enabled = true
glow_enabled = true
glow_normalized = true

[sub_resource type="ViewportTexture" id="ViewportTexture_beyj4"]
viewport_path = NodePath("Viewport/Viewport3D/CameraPivot/FloorDisplay")

[sub_resource type="ImageTexture" id="ImageTexture_rv1si"]

[sub_resource type="ImageTexture" id="ImageTexture_0go2v"]

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 0
size_flags_horizontal = 3
mouse_filter = 1
script = ExtResource("1_s53r2")

[node name="Viewport" type="Control" parent="."]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
mouse_filter = 1

[node name="Viewport3D" type="Node3D" parent="Viewport"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Viewport/Viewport3D"]
transform = Transform3D(0.727054, -0.4974, -0.473271, 0.68658, 0.526722, 0.50117, 5.96046e-08, -0.689316, 0.724461, 0, 0, 0)
light_energy = 3.0
light_bake_mode = 1
shadow_enabled = true
shadow_bias = 0.01
shadow_normal_bias = 3.0
shadow_reverse_cull_face = true
shadow_opacity = 0.85
shadow_blur = 4.0
directional_shadow_mode = 0
directional_shadow_max_distance = 200.0
directional_shadow_pancake_size = 0.0
sky_mode = 1

[node name="Floor" parent="Viewport/Viewport3D" instance=ExtResource("5_da36p")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 8.74228e-06, 0, 0)

[node name="CameraPivot" type="Marker3D" parent="Viewport/Viewport3D"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 100, -100)
script = ExtResource("2_t2ckv")

[node name="Water" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -100, -100)
cast_shadow = 0
mesh = SubResource("PlaneMesh_g8j3o")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_ncubh")

[node name="Floor3" type="MeshInstance3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -100, -100)
visible = false
mesh = SubResource("PlaneMesh_cggwn")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("ShaderMaterial_l3p72")

[node name="Camera3D" type="Camera3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 0, 0)
keep_aspect = 0
environment = SubResource("Environment_2wnku")
projection = 1
current = true
fov = 37.8493
size = 100.0
far = 300.0

[node name="FloorDisplay" type="SubViewport" parent="Viewport/Viewport3D/CameraPivot"]
transparent_bg = true
size = Vector2i(1000, 2600)

[node name="Sprite3D" type="Sprite3D" parent="Viewport/Viewport3D/CameraPivot"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -99.99, -100)
pixel_size = 0.1
axis = 1
texture = SubResource("ViewportTexture_beyj4")

[node name="VSplitContainer" type="VSplitContainer" parent="Viewport"]
layout_mode = 1
anchors_preset = -1
anchor_right = 27.023
anchor_bottom = 47.989
offset_right = -0.920044
theme_override_constants/separation = 0

[node name="VBoxContainer" type="VBoxContainer" parent="Viewport/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 0

[node name="TopSpacer" type="Control" parent="Viewport/VSplitContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5
mouse_filter = 1

[node name="HBoxContainer" type="HBoxContainer" parent="Viewport/VSplitContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0

[node name="Spacer" type="Control" parent="Viewport/VSplitContainer/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
mouse_filter = 2

[node name="PercentBar" type="VSlider" parent="Viewport/VSplitContainer/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 3.0
theme_override_icons/grabber = SubResource("ImageTexture_rv1si")
theme_override_icons/grabber_highlight = SubResource("ImageTexture_0go2v")
theme_override_styles/slider = ExtResource("4_vrtfm")
theme_override_styles/grabber_area = ExtResource("5_6xaao")
theme_override_styles/grabber_area_highlight = ExtResource("5_6xaao")
max_value = 1.0
step = 0.01
value = 1.0

[node name="BottomSpacer" type="Control" parent="Viewport/VSplitContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5

[node name="Timeline" parent="Viewport/VSplitContainer/VBoxContainer" instance=ExtResource("3_jhu7k")]
custom_minimum_size = Vector2(0, 80)
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.05

[node name="Spacer" type="Control" parent="Viewport/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
mouse_filter = 1

[node name="Chat" type="MarginContainer" parent="."]
visible = false
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TabView" type="Control" parent="."]
top_level = true
anchors_preset = 0
offset_right = 1080.0
offset_bottom = 1920.0
mouse_filter = 2

[node name="VSplitContainer" type="VSplitContainer" parent="TabView"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
theme_override_constants/separation = 0

[node name="Spacer" type="Control" parent="TabView/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2

[node name="HBoxContainer" type="HBoxContainer" parent="TabView/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.1
mouse_filter = 2

[node name="Game" type="Button" parent="TabView/VSplitContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 20
theme_override_styles/normal = ExtResource("6_4mo1t")
theme_override_styles/hover = ExtResource("7_84ov1")
theme_override_styles/pressed = ExtResource("8_csbqx")
text = "Game"

[node name="Chat" type="Button" parent="TabView/VSplitContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 20
theme_override_styles/normal = ExtResource("4_fdg00")
theme_override_styles/hover = ExtResource("5_j8x77")
theme_override_styles/pressed = ExtResource("6_h0r5t")
text = "Chat"

[node name="Production" type="Button" parent="TabView/VSplitContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 20
theme_override_styles/normal = ExtResource("4_fdg00")
theme_override_styles/hover = ExtResource("5_j8x77")
theme_override_styles/pressed = ExtResource("6_h0r5t")
text = "Production"

[node name="Logs" type="Button" parent="TabView/VSplitContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 20
theme_override_styles/normal = ExtResource("12_l14op")
theme_override_styles/hover = ExtResource("13_r880k")
theme_override_styles/pressed = ExtResource("14_d47sy")
text = "Logs"

[connection signal="value_changed" from="Viewport/VSplitContainer/VBoxContainer/HBoxContainer/PercentBar" to="." method="_on_percent_bar_value_changed"]
[connection signal="pressed" from="TabView/VSplitContainer/HBoxContainer/Game" to="." method="_on_game_pressed"]
[connection signal="pressed" from="TabView/VSplitContainer/HBoxContainer/Chat" to="." method="_on_chat_pressed"]
[connection signal="pressed" from="TabView/VSplitContainer/HBoxContainer/Production" to="." method="_on_production_pressed"]
[connection signal="pressed" from="TabView/VSplitContainer/HBoxContainer/Logs" to="." method="_on_logs_pressed"]
